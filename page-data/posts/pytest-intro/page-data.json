{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/pytest-intro","result":{"data":{"markdownRemark":{"id":"3f085e98-0281-5681-9c03-05d1b81b9952","html":"<h2 id=\"pytest\" style=\"position:relative;\"><a href=\"#pytest\" aria-label=\"pytest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pytest</h2>\n<ul>\n<li>Pytest makes it easy to write small tests but it scales to support complex functional testing for applications and libraries as well.   </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">inc</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>   \n    <span class=\"token keyword\">return</span> x<span class=\"token operator\">+</span><span class=\"token number\">1</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>   \n    <span class=\"token keyword\">assert</span> inc<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">5</span></code></pre></div>\n<ul>\n<li>The test_answer function is where the pytest looks to return a passing or failing message. The word ‘assert’ will look for the truthiness in the statement that follows it. This case will return failing message. </li>\n<li>If your tests are placed in the correct location according to the documentation, executing your test cases is as simple as just writing pytest in the terminal when you have navigated to the root of your application. </li>\n</ul>\n<h2 id=\"why-you-should-use-pytest\" style=\"position:relative;\"><a href=\"#why-you-should-use-pytest\" aria-label=\"why you should use pytest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why you should use pytest</h2>\n<ul>\n<li>It supports running the same set of test cases or test suites with multiple different parameters.</li>\n<li>Test cases can be skipped over based on conditions or prerequisites.</li>\n<li>Assert and error analysis and reporting are quite descriptive.   </li>\n</ul>\n<h3 id=\"test-using-requests-and-pytest\" style=\"position:relative;\"><a href=\"#test-using-requests-and-pytest\" aria-label=\"test using requests and pytest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test using requests and pytest</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> test_get_locations_for_us_90210_check_status_code_equals_200<span class=\"token punctuation\">:</span>\n\tresponse <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>“url”<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> response<span class=\"token punctuation\">.</span>status_code <span class=\"token operator\">==</span> <span class=\"token number\">200</span></code></pre></div>\n<ul>\n<li>In the first line of the test, we call the GET method in the requests library to perform an HTTP GET call to the specifies endpoint, and we store the entire response in a variable called response. </li>\n<li>We then extract the status_code property from the response object and write an assertion, using the pytest assert keyword, that checks that the status code is equal to 200 as expected. </li>\n</ul>\n<h3 id=\"extending-out-test-suite\" style=\"position:relative;\"><a href=\"#extending-out-test-suite\" aria-label=\"extending out test suite permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extending out test suite</h3>\n<ul>\n<li>Let’s check if the value of the response content type header correctly identifies that the response body is in JSON format.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> test_get_locations_for _us_90210_check_content_type_equals_json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tresponse <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>“url”<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span>‘Content<span class=\"token operator\">-</span>Type’<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> “application<span class=\"token operator\">/</span>json”</code></pre></div>\n<h3 id=\"how-about-checking-the-value-of-a-response-body-element\" style=\"position:relative;\"><a href=\"#how-about-checking-the-value-of-a-response-body-element\" aria-label=\"how about checking the value of a response body element permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How about checking the value of a response body element?</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">test_get_location_for_us_90210_check_country_equals_united_states</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tresponse <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>“url”<span class=\"token punctuation\">)</span>\n\tresponse_body <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> response_body<span class=\"token punctuation\">[</span>“country”<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> “United States”</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">test_get_locations_for_us_90210_check_city_equals_beverly_hills</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tresponse <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>“url”<span class=\"token punctuation\">)</span>\n\tresponse_body <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> response_body<span class=\"token punctuation\">[</span>“places”<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>“place name”<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> “Beverly Hills”</code></pre></div>\n<h2 id=\"words\" style=\"position:relative;\"><a href=\"#words\" aria-label=\"words permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Words</h2>\n<h3 id=\"fixture\" style=\"position:relative;\"><a href=\"#fixture\" aria-label=\"fixture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fixture</h3>\n<ul>\n<li>Fixtures are functions which will run before each test function to which it is applied. </li>\n<li>Fixtures are used to feed some data to the tests such as database connections, URLs to test and some sort of input data. therefore instead of running the same code for every test we can attach fixture function to the tests and it will run and return the data to the test before executing each test.</li>\n<li>pytest fixture는 테스트를 위한 데이터 셋업과 데이터 클리닝이 반복적, 독립적으로 사용될때 쓴다.</li>\n<li>실제사용예는 테스트를 위한 특정 파일과 디렉토리를 만들고 테스트 종료시 해당 파일과 디렉토리 삭제. 디비를 연결하고 테스트 종료시 디비 연결을 정상적으로 종료한다.    </li>\n</ul>\n<h3 id=\"conftestpy\" style=\"position:relative;\"><a href=\"#conftestpy\" aria-label=\"conftestpy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>conftest.py</h3>\n<ul>\n<li>Use it to define the fixtures that i inject into my tests. Fixtures are a potential and common use of conftest.py. The fixtures that you will define will be shared among all tests in your test suite. </li>\n</ul>\n<h3 id=\"parameterizing\" style=\"position:relative;\"><a href=\"#parameterizing\" aria-label=\"parameterizing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>parameterizing</h3>\n<ul>\n<li>Parameterizing of a test is done to run the test against multiple sets of inputs. we can do this by using the following marker.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pytest\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span>“num<span class=\"token punctuation\">,</span> output”<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">44</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_multiplication_11</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span> output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token keyword\">assert</span> <span class=\"token number\">11</span><span class=\"token operator\">*</span>num <span class=\"token operator\">==</span> output</code></pre></div>\n<ul>\n<li>Here the test multiplies an input with 11 and compares the result with the expected output. The test has 4 sets of inputs, each has 2 values- one is the number to be multiplied with 11 and the other is the expected result. </li>\n</ul>\n<h3 id=\"monkey-patching\" style=\"position:relative;\"><a href=\"#monkey-patching\" aria-label=\"monkey patching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monkey patching</h3>\n<ul>\n<li>Monkey patching is dynamically changing a piece of software(such as a module, object, method, or function) at runtime. </li>\n<li>It is often used for bug fixes or prototyping software, especially when using external apis or libraries. </li>\n<li>Pytest uses this feature to allow you to test out interfaces that you dont want to actually execute. for example, you can create a monkeypatched version of requests module that doesnt do the actual http transactions during testing, but just returns fixed data that you set. You can greatly decrease the amount of time your tests take to execute. </li>\n<li>How to use monkeypatching with pytest when working with an external module, which happens to be the requests module in this case. the requests module is an amazing python module that allows for easily working with http requests.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">test_get_response_success</span><span class=\"token punctuation\">(</span>monkeypatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">MockResponse</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\tself<span class=\"token punctuation\">.</span>status_code <span class=\"token operator\">=</span> <span class=\"token number\">200</span>\n\t\t\tself<span class=\"token punctuation\">.</span>url <span class=\"token operator\">=</span> ‘http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>httpbin<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>get’\n\t\t\tself<span class=\"token punctuation\">.</span>headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>‘blaa’<span class=\"token punctuation\">:</span> ‘ <span class=\"token number\">1234</span>’<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">def</span> <span class=\"token function\">mock_get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">return</span> MockResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tmonkeypatch<span class=\"token punctuation\">.</span><span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>requests<span class=\"token punctuation\">,</span> ‘get’<span class=\"token punctuation\">,</span> mock_get<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> example2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> ‘http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>www<span class=\"token punctuation\">.</span>testurl<span class=\"token punctuation\">.</span>com’<span class=\"token punctuation\">)</span>\n    \n<span class=\"token keyword\">def</span> <span class=\"token function\">test_get_response_failure</span><span class=\"token punctuation\">(</span>monkeypatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">MockResponse</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\tself<span class=\"token punctuation\">.</span>status_code <span class=\"token operator\">=</span> <span class=\"token number\">404</span>\n\t\t\tself<span class=\"token punctuation\">.</span>url <span class=\"token operator\">=</span> ‘http<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>httpbin<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>get’\n\t\t\tself<span class=\"token punctuation\">.</span> headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>‘blaa’<span class=\"token punctuation\">:</span>’<span class=\"token number\">1234</span>’<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">def</span> <span class=\"token function\">json</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token keyword\">return</span> MockRespose<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">def</span> <span class=\"token function\">mock_get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">return</span> MockResponse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tmonkeypatch<span class=\"token punctuation\">.</span><span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>requests<span class=\"token punctuation\">,</span> ‘get’<span class=\"token punctuation\">,</span> mock_get<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">assert</span> example2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span> ‘’<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"difference-between-mocking-and-monkey-patching\" style=\"position:relative;\"><a href=\"#difference-between-mocking-and-monkey-patching\" aria-label=\"difference between mocking and monkey patching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Difference between mocking and monkey patching</h3>\n<ul>\n<li>Monkey patching is replacing a function, method, class by another at runtime, for testing purposes, fixing a bug or otherwise changing behavior</li>\n<li>The unittest mock library makes use of monkey patching to replace part of your software under test by mock objects/ it provides functionality for writing clever unittests, such as:\nit keeps record of how mock objects are being called, so you can test the calling behavior of your code with asserts.\na handy decorator patch() for the actual monket patching. </li>\n<li>You can make mock objects to return specific values(return<em>value) raise specific exceptions(side</em>effect)</li>\n</ul>","fields":{"slug":"/posts/pytest-intro","tagSlugs":["/tag/tdd/","/tag/pytest/"]},"frontmatter":{"date":"2020-04-12T22:40:32.169Z","description":"TDD in Pytest and learn how to use it.","tags":["tdd","pytest"],"title":"What is Pytest?","socialImage":"#"}}},"pageContext":{"slug":"/posts/pytest-intro"}}}